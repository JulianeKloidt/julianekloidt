<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juliane Kloidt">
<meta name="dcterms.date" content="2026-02-06">

<title>The Urban Dividend Gap - WINNER of the Data Lab Data Visualisation Competition – Juliane Kloidt</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Juliane Kloidt</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:j.kloidt.1@research.gla.ac.uk"> <i class="bi bi-envelope-at-fill" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/julianekloidt/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JulianeKloidt"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">My Work</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Urban Dividend Gap - WINNER of the Data Lab Data Visualisation Competition</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Engagement</div>
    <div class="quarto-category">Impact</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Juliane Kloidt </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 6, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>I feel incredibly grateful and honoured that my entry won the <a href="https://thedatalab.com/data-visualisation-competition-2025/">Data Lab Data Visualisation Competition</a> on Exploring Climate Action 2025! After being shortlisted from more than 90 competition entries, I had the opportunity to pitch my infographic to the Data Lab’s judging panel and received the highest scores.</p>
<p><strong>The Urban Dividend Gap - Unmasking Inequity in Scotland’s Net Zero Transition</strong></p>
<p>We are often told that the journey to Net Zero is a universal win for publish health and the economy. But when we look at Scottish data from the <a href="https://edinburghcentre.org">Edinburgh Climate Change Institute</a>, we can see a different story.</p>
<p><strong>My data visualisation presents the ‘The Urban Dividend Gap’</strong>. For our most populous cities in Scotland, the transition isn’t just a challenge but a double burden. This work targets Scottish Local Council leaders because the story this data tells is one that requires an urgent shift in hoe we fund and prioritise urban city climate action.</p>
<p>To understand this, we first look at the national scale. Figure 1 visualises the benefits and costs of the transition as a dumbbell chart: grey dots (benefits), blue bars (costs), and pink dots (benefits minus costs). By normalising all data per capita, I ensured a fair comparison between Scotland’s 32 local authorities that are rank ordered by ‘take-home benefits’ (pink dots) on the y-axis.</p>
<p>What becomes apparent is that our cities, like Glasgow and Edinburgh, sit at the bottom of the take-home benefit rankings. What we see is that Scotland’s city residents are being asked to pay similar costs of Net Zero for the lowest per-capita rewards in the country.</p>
<p><img src="Data-Viz-Fig1.png" class="img-fluid" alt="Dumbbell chart of co-benefits (£) in Scottish local authorities. Rural areas lead; cities lag. Pink (Net) vs. grey (Gross) dots reveal a &quot;Hassle Tax&quot;, highlighting an Urban Lag where cities like Glasgow face the steepest barriers to climate rewards."></p>
<p><em>Figure 1.</em> Benefits vs.&nbsp;Costs of Net Zero per Capita across Scottish Local Authorities</p>
<p><strong>Why do Scottish cities benefit less from Net Zero?</strong> The data shows a Composition Gap.</p>
<p>Figure 2 visualises the per capita gains from the 5 largest co-benefit factors (increased physical activity, noise reduction, improved air quality, excess cold reduction, and improved diet quality) for Scotland’s top and bottom local authorities as stacked bar charts.</p>
<p>In car-dependent commuter belts such as Angus, East Dunbartonshire, and East Renfrewshire, the potential for improvement is massive. But in our cities where public transport use is already a baseline, the health rewards for ‘new’ physical activity (dark blue cells) are smaller. This proves that for a city like Glasgow to succeed, our policy cannot rely on transport alone. Instead, we have to unlock the potential in our housing and energy sectors.</p>
<p><img src="Data-Viz-Fig2.png" class="img-fluid" alt="Stacked bar chart of co-benefit composition (£). Physical activity is the main driver. Top 3 areas (e.g. Angus) show massive activity gains, while cities like Glasgow lag, confirming that urban centres have a lower potential for new health rewards."></p>
<p><em>Figure 2.</em> Composition of per Capita Gains (GBP) in Top vs.&nbsp;Bottom Local Authorities</p>
<p><strong>So, what does this look like on the ground?</strong> When we zoom into Glasgow’s 746 data zones, we see a fractured landscape.</p>
<p>Figure 3 visualises all co-benefits from the Net Zero transition per capita for each small area in Glasgow. The rewards of the transition are pooling in affluent pockets like the West End (show as yellow zones in the top left) while the most vulnerable communities are being left in the shade (purple-coloured data zones).</p>
<p><img src="Data-Viz-Fig3.png" class="img-fluid" alt="Choropleth map of Glasgow City showing co-benefits per capita (£) across Data Zones. Higher gains (light orange) are concentrated in affluent pockets, while most areas see lower rewards, illustrating a fractured distribution of transition benefits."></p>
<p><em>Figure 3.</em> Glasgow City’s Co-Benefits per Capita across Data Zones</p>
<p><strong>I found the most damming evidence of this equity gap in the housing sector.</strong></p>
<p>Figure 4 visualises the relationship between ‘Excess Cold’ (most important co-benefit factor related to housing) and <a href="https://www.gov.scot/collections/scottish-index-of-multiple-deprivation-2020/">Scottish Index of Multiple Deprivation</a> Percentile (higher SIMD percentile indicate less deprived areas) as a scatterplot with superimposed line of best fit. Figure 4 clearly shows that the benefit from reducing ‘Excess Cold’ in building is positively correlated with wealth. Current retrofit pathways favour high-value, hard-to-treat historic tenements in wealthy areas such as Newlands or Kelvinside and Jordanhill. This means however that we are effectively bypassing those in the most acute fuel poverty (data zones shown on the lefthand side of the graph). This is a serious threat to a Just Transition for Net Zero.</p>
<p><img src="Data-Viz-Fig4.png" class="img-fluid" alt="Scatter plot showing a positive correlation between wealth (SIMD Percentile) and health benefits from reduced &quot;Excess Cold.&quot; As affluence increases, so do rewards, proving that vital welfare gains are currently bypassing the most vulnerable."></p>
<p><em>Figure 4.</em> Excess Cold Reduction vs.&nbsp;Multiple Deprivation across Glasgow’s Data Zones</p>
<p><strong>How do we fix this?</strong></p>
<p>My analysis points to three essential shifts:</p>
<ol type="1">
<li><p><strong><em>Reduce the Urban Burden:</em></strong> We need a ‘City Transition Fund’ to subsidize the complex friction of tenement retrofitting.</p></li>
<li><p><strong><em>Equity-First Retrofits:</em></strong> We must replace existing subsidies with an SIMD-weighted allocation model to ensure benefits flow to the vulnerable.</p></li>
<li><p><strong><em>Targeted Active Travel:</em></strong> We must prioritise infrastructure in our most deprived zones to maximise health dividends where safety is a barrier.</p></li>
</ol>
<p>The data is clear. The transition to Net Zero could fuel inequality in Scotland: between urban and rural local authorities, and between wealthy and deprived data zones. But by acknowledging the Urban Dividend Gap, we can transform it into a truly Just Transition.</p>
<p>Let’s ensure that by 2050, the wealthiest residents aren’t the only ones living in warmer homes.</p>
<p><strong>About the Method:</strong></p>
<p>Using the dataset that was provided by The Data Lab, I estimated co-benefits of Scotland’s transition to Net Zero from 2025 to 2050. To ensure fair comparisons between different local authorities and small areas (data zones), I normalised the estimates per capita. I calculated local authority results by aggregating data zones. I assessed spatial inequality by joining the co-benefit data with the Scottish Index of Multiple Deprivation (SIMD).</p>
<p><strong><em>References:</em></strong> I used geometries from the<a href="https://data.spatialhub.scot">Spatial Hub Scotland (2025)</a>. I accessed data from the <a href="https://edinburghcentre.org">Edinburgh Climate Change Institute (2025)</a> and the <a href="https://www.gov.scot/collections/scottish-index-of-multiple-deprivation-2020/">Scottish Index of Multiple Deprivation (2020)</a>. The R code for my analyses is available at: <a href="https://github.com/JulianeKloidt/data_viz2025" class="uri">https://github.com/JulianeKloidt/data_viz2025</a>.</p>
<p><strong>Validation Checks:</strong></p>
<p>To provide an indication on the robustness of my results, I performed two validation checks.</p>
<ol type="1">
<li><p><strong><em>Does ‘Excess Cold’ also correlate positively with ‘Wealth’ (higher SIMD percentile) in other Scottish Cities?</em></strong></p></li>
<li><p><strong><em>Do other co-benefit factors form the housing sector also correlate positively with ‘Wealth’ (higher SIMD percentile)?</em></strong></p></li>
</ol>
<p>Please check out my <a href="https://github.com/JulianeKloidt/data_viz2025">GitHub repository</a> for the validation code and outputs.</p>
<p>For my first validation check, I visualised the relationship between ‘Excess Cold’ and ‘Wealth’ in Scotland’s next largest cities: Edinburgh, Aberdeen, and Dundee. As for Glasgow, ‘Excess Cold’ and ‘Wealth’ are positively correlated in Edinburgh, Aberdeen, and Dundee. These results prove that inequity in the Net Zero transition is not a Glasgow-only phenomenon.</p>
<p>For my second validation check, I visualised the relationship between ‘Dampness’ (the second biggest co-benefit factor related to housing) and ‘Wealth’ in Glasgow, Edinburgh, Aberdeen, and Dundee. I found no relationship between both variables in Glasgow as well as small negative correlations for the other cities. These results indicate that, when it comes to dampness reduction, more deprived data zones benefit more from Net Zero than less deprived neighbourhoods. The magnitude of benefits however is about 10 times smaller for ‘Dampness” than for ‘Excess Cold’, meaning that the inequality in the housing sector remains highly relevant.</p>
<p><strong>Feedback from the Judges:</strong></p>
<p>I received lots of constructive feedback on my data visualisation from the Data Lab Judging Panel. Although I won the first prize in the competition, there’s still room for improvement: The most prevalent feedback was that the Figure 1 (dumbbell chart) may be difficult to understand and interpret for non-experts. If I were to start this project again, I would therefore opt for a more intuitive chart, perhaps three bar charts presenting the benefits, costs, and take-home benefits, and highlighting the bars for Glasgow and Edinburgh.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/JulianeKloidt\.github\.io\/julianekloidt\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>CC-BY-SA-4.0 (2025) Juliane Kloidt</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>